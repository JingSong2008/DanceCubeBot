# DanceCubeBot

这是一个基于 Mirai 的 QQ 机器人插件，用于与舞立方（DanceCube）游戏平台进行交互。该机器人支持多种功能，包括用户信息查询、音乐成绩分析、机台位置查找等。

## 功能介绍

- **用户信息查询**：可以查询用户的等级、得分、歌曲完成情况等。
- **战力分析**：根据用户的近期游戏数据，分析其游戏水平。
- **音乐成绩查询**：查询用户特定歌曲的成绩详情。
- **机台查找**：查找附近的舞立方机台位置。
- **二维码登录**：通过生成二维码实现账号扫码登录。
- **手机号登录**：支持使用手机号进行登录操作。
- **自制谱兑换**：提供兑换自制谱的功能。
- **Token 管理**：管理登录凭证，支持刷新和保存 Token。

## 搭建指南

### 环境要求

- Java 17 或更高版本
- Gradle 构建工具
- Git

### 安装步骤

1. 克隆仓库到本地：
   ```bash
   git clone https://gitee.com/mcci66/dancecubebot.git
   cd dancecubebot
   ```

2. 构建项目：
   ```bash
   ./gradlew build
   ```

3. 将构建好的插件文件（`.jar`）放入 Mirai 控制台的 `plugins` 文件夹中。

4. 启动 Mirai 控制台并加载插件。

## 文件配置

在使用前需要配置一些关键信息：

- **Token IDs**：用于身份验证的令牌 ID。
- **API Keys**：访问外部服务所需的 API 密钥。
  - **腾讯 OCR SDK 密钥**：用于图像识别。
  - **高德地图定位 SDK 密钥**：用于获取地理位置信息。

这些配置通常位于 `src/main/java/com/mirai/config/AbstractConfig.java` 中的相关字段里，请根据实际情况修改。

## 开发帮助

### 指令功能

#### 指令声明

所有指令都通过注解 `@DeclaredCommand` 来定义，并且可以在 `AllCommands.java` 中找到具体的命令实现。

#### 正则指令

支持通过正则表达式匹配消息内容来触发指令，例如帮助信息请求。

#### 参数指令

支持带参数的指令，允许用户传递额外的信息给机器人处理。

### 作用域

指令可以在不同的作用域下执行，比如私聊、群聊等，具体由 `Scope` 枚举定义。

### 一些提醒

- 在部署之前确保所有的敏感信息如 API 密钥已经正确配置。
- 使用过程中如果遇到问题，可以查看日志文件以获取更多信息。
- 对于自定义需求，可以通过继承现有的命令类来扩展新的功能。

## 鸣谢

感谢 Mirai 社区提供的框架支持以及所有贡献者对项目的持续改进。同时也要感谢舞立方平台为我们提供了丰富的游戏数据接口。